{"version":3,"sources":["./src/app/pages/customer-orders/customer-orders.page.ts","./src/app/pages/customer-orders/customer-orders-routing.module.ts","./src/app/pages/customer-orders/customer-orders.page.html","./src/app/pages/customer-orders/customer-orders.page.scss","./src/app/pages/customer-orders/customer-orders.module.ts"],"names":[],"mappings":"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","file":"pages-customer-orders-customer-orders-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { OrderService } from 'src/app/services/order.service';\nimport { CartItem, Order, OrderStatus } from 'src/app/objects/cart.model';\nimport { OrderItem } from 'src/app/objects/food-drink-menu.model';\n\n@Component({\n  selector: 'app-customer-orders',\n  templateUrl: './customer-orders.page.html',\n  styleUrls: ['./customer-orders.page.scss'],\n})\nexport class CustomerOrdersPage implements OnInit {\n  private uid:string\n  cid: string;\n  limit = 10;\n  orderStatus: OrderStatus;\n  customerOrders: Order[];\n\n  constructor(private location: Location,\n              private route   : ActivatedRoute,\n              private orderService:OrderService,\n              private router  : Router) {\n\n    this.route.queryParams.subscribe(params => {\n      if (this.router.getCurrentNavigation().extras.state){ \n        this.uid    = this.router.getCurrentNavigation().extras.state.uid; \n        this.cid    = this.router.getCurrentNavigation().extras.state.cid; \n      } \n    });\n    this.orderStatus        = new OrderStatus();\n  }\n\n  ngOnInit() {\n    this.getCutomerOrders();\n  }\n  getCutomerOrders() {\n    let orders_ref = this.orderService.getCutomerOrders(this.cid)\n    orders_ref.orderBy('created_at','desc')\n    orders_ref.where('uid','==',this.uid)\n    orders_ref.limit(this.limit) \n    orders_ref.get().then((customer_orders)=>{\n      this.customerOrders = customer_orders.docs.map(order=>{\n        return <Order>{id:order.id,...order.data()}\n      })\n    })\n  }\n\n  getOrderPrice(order:Order){  \n    let total:number = 0\n    order.cart_items.map((cart_item:CartItem)=>{\n      cart_item.food.orders.map((order:OrderItem)=>{\n        total += order.additional.quantity * order.additional.price\n      })\n      total   += cart_item.food.price;\n    })\n    return total;\n  }\n\n  getFoodTotalPrice(cart_item:CartItem){\n    return this.orderService.getFoodTotalPrice(cart_item)\n  }\n\n  getStatus(order:Order){ \n    if(order.status.cancel_by_cutomer == 'cancel_by_cutomer'){\n      return // siz iptal ettiniz\n    }\n    return this.orderStatus.getValue(order.status.status)\n  }\n\n  cancelOrder(order:Order){\n    this.orderService.cancelOrder(this.cid,order).then(()=>{\n      order.status.cancel_by_cutomer == \"cancel_by_cutomer\";\n    })\n  }\n\n  back(){\n    this.location.back();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CustomerOrdersPage } from './customer-orders.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CustomerOrdersPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CustomerOrdersPageRoutingModule {}\n","export default \"<ion-toolbar> \\n  <ion-tabs>\\n    <ion-tab-bar slot=\\\"top\\\"> \\n      <ion-tab-button (click)=\\\"back()\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-tab-button> \\n      <ion-title>Siparişlerim</ion-title>\\n      <ion-tab-button  >\\n         \\n      </ion-tab-button> \\n    </ion-tab-bar> \\n  </ion-tabs>\\n</ion-toolbar>\\n \\n\\n<ion-content>\\n  <!-- herbir order -->\\n  <ion-card *ngFor = \\\"let cOrder of customerOrders\\\" button >\\n    <ion-row>\\n      <ion-col size=\\\"5\\\">\\n        <ion-button *ngIf=\\\"cOrder.account\\\" fill=\\\"clear\\\" size=\\\"small\\\"> \\n          {{ cOrder.account?.displayName }}\\n        </ion-button>\\n        <ion-button *ngIf = \\\"cOrder.shipping_address.name_surname_for_totable\\\" fill=\\\"clear\\\" size=\\\"small\\\"> \\n          {{ cOrder.shipping_address.name_surname_for_totable }}\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"4\\\">\\n      </ion-col>\\n      <ion-col size=\\\"3\\\">\\n        <ion-button  (click)=\\\"cancelOrder(cOrder)\\\" *ngIf=\\\"(cOrder.status.status != 'gonderildi' && cOrder.status.cancel_by_cutomer!='cancel_by_cutomer')\\\"   fill=\\\"clear\\\" color=\\\"danger\\\" size=\\\"small\\\">\\n          İptal\\n        </ion-button>\\n        <ion-button disabled *ngIf=\\\"cOrder.status.cancel_by_cutomer=='cancel_by_cutomer'\\\"  fill=\\\"clear\\\" size=\\\"small\\\">\\n          İptal Ettiniz\\n        </ion-button>\\n      </ion-col>\\n      \\n\\n    </ion-row>\\n    <ion-card-content>\\n      <!-- herbir food --> \\n      <div *ngFor=\\\"let item of cOrder.cart_items\\\" style=\\\"margin-top: 10px;\\\">\\n        <div style=\\\"font-weight: bold;font-style: italic;\\\" > </div>\\n        <ion-item lines=\\\"none\\\">\\n          <ion-label>{{item.food.title}}   {{ item.food.price | currencyPipe }}</ion-label> \\n        </ion-item> \\n        <ion-item *ngFor=\\\"let forder of item.food.orders\\\" lines=\\\"none\\\">\\n          <ion-note > \\n            {{forder.additional.name}} \\n            {{forder.additional.price | currencyPipe}} x {{forder.additional.quantity}} =\\n            {{(forder.additional.price * forder.additional.quantity) | currencyPipe}}            \\n          </ion-note> \\n        </ion-item> \\n        <ion-item  lines=\\\"none\\\">\\n          <ion-label color=\\\"medium\\\">Yemek + İlaveler : </ion-label>\\n          <ion-badge color=\\\"medium\\\">{{ getFoodTotalPrice(item) | currencyPipe }}</ion-badge> \\n        </ion-item>\\n      </div><!-- herbir food END-->  \\n\\n      <ion-item lines=\\\"none\\\">\\n        <ion-label> Genel Toplam : </ion-label>\\n        <ion-badge color=\\\"medium\\\">{{ getOrderPrice(cOrder) | currencyPipe }}</ion-badge>\\n      </ion-item>\\n    </ion-card-content> \\n    <ion-row>\\n      <ion-col size=\\\"5\\\">{{ cOrder.created_at | unixTimeToDate: 'date' }} {{ cOrder.created_at | unixTimeToDate: 'hm' }} </ion-col>\\n      <ion-col size=\\\"7\\\">{{ getStatus(cOrder) }} - {{ cOrder.status.created_at | unixTimeToDate: 'hm' }}</ion-col>\\n    </ion-row>\\n  </ion-card> <!-- herbir order END -->\\n</ion-content>\\n\";","export default \"ion-card {\\n  --background: aliceblue;\\n  box-shadow: unset;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2N1c3RvbWVyLW9yZGVycy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSx1QkFBQTtFQUNBLGlCQUFBO0FBQ0oiLCJmaWxlIjoiY3VzdG9tZXItb3JkZXJzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJkIHtcbiAgICAtLWJhY2tncm91bmQ6IGFsaWNlYmx1ZTsgXG4gICAgYm94LXNoYWRvdzogdW5zZXQ7XG59Il19 */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms'; \nimport { IonicModule } from '@ionic/angular'; \nimport { CustomerOrdersPageRoutingModule } from './customer-orders-routing.module'; \nimport { CustomerOrdersPage } from './customer-orders.page'; \nimport { CurrencyPipe } from 'src/app/pipes/currency.pipe';\nimport { UnixTimeToDatePipe } from 'src/app/pipes/unix-time-to-date.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CustomerOrdersPageRoutingModule\n  ],\n  declarations: [CustomerOrdersPage,CurrencyPipe,UnixTimeToDatePipe]\n})\nexport class CustomerOrdersPageModule {}"],"sourceRoot":"webpack:///"}