{"version":3,"sources":["webpack:///src/app/pages/message-stats/message-stats.page.ts","webpack:///src/app/pages/message-stats/message-stats-routing.module.ts","webpack:///src/app/pages/message-stats/message-stats.module.ts","webpack:///src/app/pages/message-stats/message-stats.page.scss","webpack:///src/app/pages/message-stats/message-stats.page.html"],"names":["MessageStatsPage","loadingController","location","messageService","route","stats","replyes","start_after_doc","noNexReplyes","limit","message","text","replace","linkify","message_id","snapshot","paramMap","get","channel_id","getStats","call_back_id","getMessageReplyes","urlRegex","url","create","duration","loading","present","getMessageStats","snapshotChanges","subscribe","data","payload","dismiss","choices","forEach","chckt","i","length","map","e","doc","id","push","reply","username","uid","back","selector","template","routes","path","component","MessageStatsPageRoutingModule","imports","forChild","exports","MessageStatsPageModule","declarations"],"mappings":"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","file":"pages-message-stats-message-stats-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { LoadingController } from '@ionic/angular'; \nimport { Message } from 'src/app/objects/message.model';\nimport { MessageService } from 'src/app/services/message.service';\nimport { Location } from '@angular/common';\n\n\n@Component({\n  selector: 'app-message-stats',\n  templateUrl: './message-stats.page.html',\n  styleUrls: ['./message-stats.page.scss'],\n})\nexport class MessageStatsPage implements OnInit {\n  message_id      : string;\n  channel_id      : string; \n  stats           : any=[];\n  message         : Message;\n  replyes         : any[]=[];\n  start_after_doc : any=null\n  noNexReplyes    : boolean= false;\n\n  constructor(  private loadingController: LoadingController,\n                public location:Location,\n                private messageService: MessageService, \n                private route:ActivatedRoute) { }\n\n  async ngOnInit() {   \n    this.message    = this.messageService.message;\n    this.message.text       = this.message.text.replace(/<[^>]*>/g, '');\n    this.message.text       = this.linkify(this.message.text);\n    this.message_id = this.route.snapshot.paramMap.get('mid');\n    this.channel_id = this.route.snapshot.paramMap.get('cid');\n    this.getStats();\n    if(this.message.call_back_id == 5){\n      this.getMessageReplyes()\n    }    \n  }\n\n  linkify(text) {\n    var urlRegex =/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n    return text.replace(urlRegex, function(url) {\n        return '<a href=\"' + url + '\">' + url + '</a>';\n    });\n  }\n\n  async getStats(){   \n    let loading = await this.loadingController.create({ \n      message: 'Please wait...',\n      duration:5000\n    });\n    await loading.present();\n    this.messageService.getMessageStats(this.message_id,this.channel_id).snapshotChanges().subscribe(async data => { \n      \n      this.stats       = data.payload.data();\n      await loading.dismiss();\n      if(this.message.call_back_id == 4 || this.message.call_back_id == 0){ \n        this.message.choices.forEach((chckt,i)=>{\n          chckt['stats'] = this.stats['chckt_'+i]\n        })\n      }else if(this.message.call_back_id == 2){\n        \n      }\n    })\n  }\n  \n  private limit:number = 20;\n  async getMessageReplyes(){    \n    let loading = await this.loadingController.create({ \n          message: 'Please wait...',\n          duration:5000\n        });\n        loading.present();     \n    \n      this.messageService.getMessageReplyes(this.message_id,this.channel_id,this.start_after_doc,this.limit).snapshotChanges().subscribe((data)=>{\n        loading.dismiss();\n        if(data.length){          \n          data.map(e => {\n            if(e.payload.doc.id != 'stats'){\n              this.replyes.push( {\n                id:e.payload.doc.id,\n                reply: e.payload.doc.data()['reply'],\n                username: e.payload.doc.data()['username'],\n                uid: e.payload.doc.data()['uid'],  \n              });\n            }\n          })\n          this.start_after_doc = data[data.length-1].payload.doc; \n          if(data.length<this.limit){\n            this.noNexReplyes = true\n          }\n        }           \n      }) \n  }\n\n  back(){\n    this.location.back();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MessageStatsPage } from './message-stats.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MessageStatsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MessageStatsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MessageStatsPageRoutingModule } from './message-stats-routing.module';\n\nimport { MessageStatsPage } from './message-stats.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MessageStatsPageRoutingModule\n  ],\n  declarations: [MessageStatsPage]\n})\nexport class MessageStatsPageModule {}\n","export default \"/*\\nion-content{\\n    --padding-start: 20px;\\n    --padding-end: 20px;  \\n    --background: url('/assets/bg.png'),beige;\\n}\\n\\nion-card{\\n    box-shadow:none;\\n    border:1px solid rgb(235, 230, 211);\\n}\\n*/\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL21lc3NhZ2Utc3RhdHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztDQUFBIiwiZmlsZSI6Im1lc3NhZ2Utc3RhdHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbmlvbi1jb250ZW50e1xuICAgIC0tcGFkZGluZy1zdGFydDogMjBweDtcbiAgICAtLXBhZGRpbmctZW5kOiAyMHB4OyAgXG4gICAgLS1iYWNrZ3JvdW5kOiB1cmwoJy9hc3NldHMvYmcucG5nJyksYmVpZ2U7XG59XG5cbmlvbi1jYXJke1xuICAgIGJveC1zaGFkb3c6bm9uZTtcbiAgICBib3JkZXI6MXB4IHNvbGlkIHJnYigyMzUsIDIzMCwgMjExKTtcbn1cbiovIl19 */\";","export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>  \\n    <ion-title>İstatistikleri</ion-title>\\n    <ion-buttons slot=\\\"start\\\" (click)=\\\"back()\\\">\\n      <ion-icon name=\\\"chevron-back-outline\\\"  ></ion-icon>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card  >\\n    <ion-card-header>\\n      <p color=\\\"medium\\\" [innerHTML]=\\\"message.text\\\"></p>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <section *ngIf=\\\"message.call_back_id==4 || message.call_back_id==0\\\">\\n        <ion-item *ngFor=\\\"let choice of message.choices\\\" class=\\\"ion-text-wrap\\\">\\n          <ion-icon  *ngIf=\\\"choice.correct\\\"  color=\\\"success\\\" name=\\\"add\\\"></ion-icon>\\n          <ion-label color=\\\"medium\\\" class=\\\"ion-text-wrap\\\">{{choice.text}}</ion-label>\\n          <ion-badge color=\\\"primary\\\">{{choice.stats}}</ion-badge>\\n        </ion-item>\\n      </section>\\n\\n      <section *ngIf=\\\"message.call_back_id==1\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"thumbs-up-outline\\\"></ion-icon>\\n          <ion-label color=\\\"primary\\\">{{stats.Y}}</ion-label>\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"thumbs-down-outline\\\"></ion-icon> \\n          <ion-label color=\\\"primary\\\">{{stats.N}}</ion-label>\\n        </ion-item>   \\n      </section>\\n\\n      <section *ngIf=\\\"message.call_back_id==2\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"happy-outline\\\"></ion-icon>\\n          <ion-label color=\\\"primary\\\">{{stats.Y}}</ion-label>\\n        </ion-item> \\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"ellipsis-horizontal-circle-outline\\\"></ion-icon>\\n          <ion-label color=\\\"primary\\\">{{stats.Z}}</ion-label>\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"sad-outline\\\"></ion-icon> \\n          <ion-label color=\\\"primary\\\">{{stats.N}}</ion-label>\\n        </ion-item>\\n      </section>\\n\\n      <section *ngIf=\\\"message.call_back_id==3\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"checkmark-circle-outline\\\"></ion-icon>\\n          <ion-label color=\\\"primary\\\">{{stats.Y}}</ion-label>\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon slot=\\\"start\\\"  name=\\\"close-circle-outline\\\"></ion-icon> \\n          <ion-label color=\\\"primary\\\">{{stats.N}}</ion-label>\\n        </ion-item>   \\n      </section>\\n    </ion-card-content>\\n    <ion-item>\\n      <ion-icon  slot=\\\"end\\\" name=\\\"eye-outline\\\" ></ion-icon>\\n      <ion-badge slot=\\\"end\\\" color=\\\"light\\\"  >{{stats.doccount}}</ion-badge>  \\n    </ion-item>\\n  </ion-card>\\n\\n  <section *ngIf=\\\"message.call_back_id==5\\\">\\n    <div *ngFor=\\\"let reply of replyes\\\" class=\\\"ion-text-wrap\\\">\\n      <ion-card  *ngIf=\\\"reply.id.length > 10 \\\"> <!-- stats doc unu geçmek için-->\\n        <ion-card-header> \\n          <small >{{reply.username}}</small> \\n        </ion-card-header>\\n        <ion-card-content>\\n          <ion-label color=\\\"medium\\\" >{{reply.reply}}</ion-label>\\n        </ion-card-content>\\n      </ion-card>\\n    </div>\\n\\n    <ion-button (click)=\\\"getMessageReplyes()\\\" *ngIf=\\\"!noNexReplyes\\\" expand=\\\"block\\\" color=\\\"medium\\\">\\n      Sonraki Cevaplar\\n    </ion-button>\\n  </section>\\n</ion-content>\";"]}